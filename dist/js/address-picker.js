function addPicker(){$("#picker").click(function(){$.popup('<div onclick="popAddChooseClose();" class="popup popup-addChoose-overlay"><div onclick="popClickNoAct();" class="popup-addChoose"><div class="header"><p>所在地区</p><span onclick="popAddChooseClose();" class="u-icon-close pull-right"></span></div><div class="select"><span onclick="backChooseLevel(this);" class="active">请选择</span></div><div class="choose-box-wrap"><div class="choose-box">'+addressLevel1()+'</div><div class="choose-box"></div><div class="choose-box"></div><div class="choose-box"></div></div></div></div>',!0)})}function popAddChooseClose(){event.stopPropagation(),$.closeModal(".popup-addChoose-overlay")}function popClickNoAct(){event.stopPropagation()}function chooseDetailAdd(e){event.stopPropagation();var d=e;$(d).parent().find(".add-choose-active").removeClass("add-choose-active"),$(d).parent().find(".add-choose-icon").remove(),$.showIndicator(),$(d).addClass("add-choose-active"),$(d).html($(d).html()+'<i class="icon icon-check add-choose-icon"></i>'),setTimeout(function(){$(".popup-addChoose .select span:last-child").html($(d).text()),$(".popup-addChoose .select span:last-child").attr("name",$(d).attr("name")),$(".popup-addChoose .select span.active").removeClass("active"),$(".popup-addChoose .select").append('<span onclick="backChooseLevel(this);" class="active">请选择</span>'),$(".choose-box-wrap .choose-box").hide(),$(".choose-box-wrap .choose-box").eq($(".popup-addChoose .select span.active").index()).show();var e=$(".popup-addChoose .select span.active").index()+1,a=$(d).attr("name");$(".choose-box-wrap").find(".choose-box").eq($(d).parents(".choose-box").index()+1).append(addressLevel2(e,a))},50)}function addressLevel1(){var e="";return $.each(addLV1.addressCodeList,function(d,a){e+='<p onclick="chooseDetailAdd(this);" name='+a.addressCode+">"+a.addressName+"</p>"}),e}function addressLevel2(e,d){var a="";return $.ajax({type:"get",url:luanmingli.getUrl+"getAddressCodes",data:{addressLevel:e,parentCode:d,v:luanmingli.srvVersion},async:!1,dataType:"json",success:function(e){0==e.stateCode?$.each(e.addressCodeList,function(e,d){a+=1==d.hasChild?'<p onclick="chooseDetailAdd(this);" name='+d.addressCode+">"+d.addressName+"</p>":"<p onclick=\"chooseFinish('"+d.addressName+"',this);\" name="+d.addressCode+">"+d.addressName+"</p>"}):$.alert(e.message),$.hideIndicator()}}),a}function chooseFinish(e,d){event.stopPropagation();var a=d;$(a).addClass("add-choose-active"),$(a).html($(a).html()+'<i class="icon icon-check add-choose-icon"></i>'),setTimeout(function(){var d="";$.each($(".popup-addChoose .select span"),function(a,s){d+=/选择/.test($(s).html())?e:$(s).html()}),$.closeModal(".popup-addChoose-overlay"),$("#picker").removeAttr("data-lv4"),$("#picker").removeAttr("data-lvname4"),$("#picker").val(d),$.each($(".popup-addChoose .select span"),function(e,d){$("#picker").attr("data-lv"+(e+1),$(d).attr("name")),$("#picker").attr("data-lvname"+(e+1),$(d).text())}),$("#picker").attr("data-lv"+parseInt($(".popup-addChoose .select span").length),$(a).attr("name")),$("#picker").attr("data-lvname"+parseInt($(".popup-addChoose .select span").length),$(a).text()),pickerScroll()},50)}function backChooseLevel(e){event.stopPropagation();var d=e;$(".choose-box-wrap .choose-box").hide(),$(".choose-box-wrap .choose-box").eq($(d).index()).show(),$(".choose-box-wrap .choose-box").eq($(d).index()).nextAll().find("p").remove(),$(d).addClass("active"),$(d).nextAll().remove()}function pickerScroll(){if($("#picker")[0].scrollWidth>$("#picker").width()&&$("#picker").length>0){var e=1,d=0;setInterval(function(){d+=e,$("#picker").scrollLeft(d),($("#picker")[0].scrollLeft+$("#picker").width()>=$("#picker")[0].scrollWidth||$("#picker")[0].scrollLeft<=0)&&(e=-e)},30)}}var addLV1={message:"操作成功",addressCodeList:[{addressName:"北京",addressCode:1,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"上海",addressCode:2,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"天津",addressCode:3,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"重庆",addressCode:4,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"河北",addressCode:5,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"山西",addressCode:6,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"河南",addressCode:7,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"辽宁",addressCode:8,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"吉林",addressCode:9,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"黑龙江",addressCode:10,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"内蒙古",addressCode:11,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"江苏",addressCode:12,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"山东",addressCode:13,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"安徽",addressCode:14,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"浙江",addressCode:15,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"福建",addressCode:16,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"湖北",addressCode:17,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"湖南",addressCode:18,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"广东",addressCode:19,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"广西",addressCode:20,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"江西",addressCode:21,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"四川",addressCode:22,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"海南",addressCode:23,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"贵州",addressCode:24,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"云南",addressCode:25,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"西藏",addressCode:26,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"陕西",addressCode:27,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"甘肃",addressCode:28,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"青海",addressCode:29,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"宁夏",addressCode:30,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"新疆",addressCode:31,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"台湾",addressCode:32,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"香港",addressCode:42,addreeeLevel:null,parentCode:0,hasChild:1},{addressName:"澳门",addressCode:43,addreeeLevel:null,parentCode:0,hasChild:1}],stateCode:0};